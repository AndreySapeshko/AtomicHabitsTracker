# Frontend Documentation — Atomic Habits Tracker

Frontend-часть проекта реализована на React + Vite + TypeScript и представляет собой полноценное SPA-приложение для управления привычками, аналитики и интеграции с Telegram.

---

## 1. Технологический стек

| Технология | Назначение |
|------------|------------|
| React | UI библиотека |
| Vite | Сборщик и dev-сервер |
| TypeScript | Статическая типизация |
| Zustand | Глобальное состояние (auth) |
| React Router | Роутинг |
| Axios | HTTP-клиент |
| Recharts | Графики и диаграммы |
| JWT | Авторизация |
| CSS / Inline styles | Оформление интерфейса |

---

## 2. Общая структура frontend

Корневая директория:

aht_app_frontend/

Логическая структура:

| Папка | Назначение |
|--------|------------|
| `pages/` | Все страницы приложения |
| `components/` | Переиспользуемые UI-компоненты |
| `api/` | Все HTTP-запросы к backend |
| `store/` | Zustand-хранилища |
| `types/` | TypeScript-типы |
| `router/` | Маршрутизация |
| `hooks/` | Кастомные хуки |
| `assets/` | Статические файлы |

---

## 3. Роутинг приложения

| Путь | Назначение |
|------|------------|
| `/login` | Авторизация |
| `/register` | Регистрация |
| `/habits` | Список привычек |
| `/habits/create` | Создание привычки |
| `/habits/:id` | Детали привычки |
| `/habits/:id/edit` | Редактирование |
| `/habits/:id/instances` | Инстансы привычки |
| `/habits/:id/analytics` | Аналитика |
| `/public` | Публичные привычки |
| `/today` | Задания на сегодня |
| `/profile` | Профиль пользователя |

Защита маршрутов осуществляется через компонент `ProtectedRoute`.

---

## 4. Авторизация и состояние (Zustand)

Авторизация хранится в Zustand-store:

- access токен
- refresh токен

Токены сохраняются в `localStorage`:

| Ключ | Назначение |
|------|------------|
| `access_token` | JWT access |
| `refresh_token` | JWT refresh |

Основные методы:

- `setTokens(access, refresh)`
- `logout()`

Axios-интерцепторы автоматически:

- добавляют access токен в заголовок
- выполняют logout + redirect при 401

---

## 5. API слой

Все API-запросы вынесены в папку `api/`.

| Файл | Назначение |
|-------|------------|
| `apiClient.ts` | Базовый axios-инстанс |
| `habitsApi.ts` | Привычки |
| `instancesApi.ts` | Инстансы |
| `statsApi.ts` | Статистика |
| `authApi.ts` | Авторизация |

Каждый файл экспортирует строго типизированные методы.

---

## 6. Страницы приложения

### 6.1. Auth

- LoginPage
- RegisterPage

Функциональность:

- логин по email
- регистрация
- сохранение JWT
- редиректы

---

### 6.2. Habits

- список привычек
- создание
- редактирование
- удаление
- просмотр деталей

Используются компоненты:

- `HabitCard`
- `HabitForm`
- `HabitDetails`

---

### 6.3. Habit Instances

- просмотр всех инстансов привычки
- страница `/today`
- статусы выполнения
- отмена
- пропуск

---

### 6.4. Analytics

Используются Recharts:

| График | Назначение |
|--------|------------|
| ProgressBar | Общий прогресс |
| Pie Chart | Распределение статусов |
| Bar Chart | Недельная активность |
| Streak Block | Текущая серия |

---

### 6.5. Public Habits

`/public`:

- отображает публичные привычки других пользователей
- используется как источник идей
- кнопки действий скрыты

---

### 6.6. Profile

`/profile`:

- информация о пользователе
- генерация Telegram bind-кода
- ссылка на Telegram-бота
- отвязка Telegram

---

## 7. Компоненты UI

Основные компоненты:

| Компонент | Назначение |
|-----------|------------|
| `Layout` | Общий layout |
| `NavBar` | Верхняя навигация |
| `HabitCard` | Карточка привычки |
| `ProgressBar` | Прогресс |
| `Charts` | Все графики |
| `Loader` | Загрузка |
| `Modal` | Диалоги |

UI выполнен в едином стиле:

- карточная сетка
- адаптивность
- тени
- аккуратные формы
- единые кнопки

---

## 8. Интеграция с Telegram через UI

Frontend:

- показывает ссылку на Telegram-бота
- генерирует bind-код
- отображает статус привязки
- позволяет отвязать Telegram

---

## 9. Типизация

Все данные строго типизированы:

| Тип | Назначение |
|------|------------|
| `Habit` | Привычка |
| `HabitInstance` | Инстанс |
| `Stats` | Статистика |
| `User` | Пользователь |

TypeScript используется во всех слоях.

---

## 10. Обработка ошибок

- отображение ошибок API
- toast-уведомления
- text error blocks
- автоматический logout при 401

---

## 11. Тестирование frontend

Используется:

- Vitest
- React Testing Library

Покрытие:

- страницы
- store (Zustand)
- API mocking
- компоненты
- роутинг

---

## 12. Сборка проекта

Команды:

- `npm run dev` — разработка
- `npm run build` — production сборка
- `npm run preview` — предпросмотр

После сборки используется папка:

dist/

---

## 13. Итог

Frontend Atomic Habits Tracker представляет собой:

- современное SPA-приложение
- строгую типизацию
- JWT-авторизацию
- глубокую аналитику
- интеграцию с Telegram
- адаптивный профессиональный UI
- production-ready архитектуру
